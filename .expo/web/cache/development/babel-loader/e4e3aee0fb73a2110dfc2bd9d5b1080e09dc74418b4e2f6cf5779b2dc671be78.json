{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport axios from 'axios';\nimport Createstyle from \"../style/Createstyle\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Create = function Create(_ref) {\n  var navigation = _ref.navigation,\n    refreshRead = _ref.refreshRead;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    issueText = _useState2[0],\n    setIssueText = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    fetchedData = _useState4[0],\n    setFetchedData = _useState4[1];\n  useEffect(function () {\n    fetchIssues();\n  }, []);\n  var fetchIssues = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield axios.get('https://crudcrud.com/api/f856cf192fc645ae8076683d038c8a57/read');\n        if (response.status === 200) {\n          setFetchedData(response.data);\n        } else {\n          console.error('Failed to fetch issues');\n        }\n      } catch (error) {\n        console.error('Error fetching issues:', error);\n      }\n    });\n    return function fetchIssues() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var createIssue = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var response = yield axios.post('https://crudcrud.com/api/f856cf192fc645ae8076683d038c8a57/read', {\n          text: issueText\n        });\n        if (response.status === 201) {\n          refreshRead();\n          fetchIssues();\n          if (navigation && navigation.goBack) {\n            navigation.goBack();\n          } else {\n            console.error('Navigation object or goBack method is undefined');\n          }\n        } else {\n          console.error('Failed to create issue. Status:', response.status);\n        }\n      } catch (error) {\n        console.error('Error creating issue:', error.message);\n      }\n    });\n    return function createIssue() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: Createstyle.container,\n    children: [_jsxs(View, {\n      style: Createstyle.container,\n      children: [_jsx(TextInput, {\n        style: Createstyle.input,\n        placeholder: \"Create Issue\",\n        value: issueText,\n        onChangeText: function onChangeText(text) {\n          return setIssueText(text);\n        }\n      }), _jsx(TouchableOpacity, {\n        style: Createstyle.button,\n        onPress: createIssue,\n        children: _jsx(Text, {\n          style: Createstyle.buttonText,\n          children: \"Submit\"\n        })\n      })]\n    }), _jsxs(View, {\n      style: Createstyle.container,\n      children: [_jsx(Text, {\n        style: Createstyle.heading,\n        children: \"Fetched Data:\"\n      }), _jsx(FlatList, {\n        data: fetchedData,\n        keyExtractor: function keyExtractor(item) {\n          return item._id;\n        },\n        renderItem: function renderItem(_ref4) {\n          var item = _ref4.item;\n          return _jsx(View, {\n            style: Createstyle.issueContainer,\n            children: _jsx(Text, {\n              style: Createstyle.issueText,\n              children: item.text\n            })\n          });\n        }\n      })]\n    })]\n  });\n};\nexport default Create;","map":{"version":3,"names":["React","useState","useEffect","axios","Createstyle","Create","navigation","refreshRead","issueText","setIssueText","fetchedData","setFetchedData","fetchIssues","response","get","status","data","console","error","createIssue","post","text","goBack","message","container","input","button","buttonText","heading","item","_id","issueContainer"],"sources":["/home/dom/React-native-IsuesLoger/crud/Create.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, TextInput, TouchableOpacity, Text, FlatList } from 'react-native';\nimport axios from 'axios';\nimport Createstyle from '../style/Createstyle';\n\nconst Create = ({ navigation, refreshRead }) => {\n  const [issueText, setIssueText] = useState('');\n  const [fetchedData, setFetchedData] = useState([]);\n\n  useEffect(() => {\n    fetchIssues();\n  }, []); // Fetch data when the component mounts\n\n  const fetchIssues = async () => {\n    try {\n      const response = await axios.get('https://crudcrud.com/api/f856cf192fc645ae8076683d038c8a57/read');\n      if (response.status === 200) {\n        setFetchedData(response.data);\n      } else {\n        console.error('Failed to fetch issues');\n      }\n    } catch (error) {\n      console.error('Error fetching issues:', error);\n    }\n  };\n\n  const createIssue = async () => {\n    try {\n      const response = await axios.post('https://crudcrud.com/api/f856cf192fc645ae8076683d038c8a57/read', {\n        text: issueText,\n      });\n\n      if (response.status === 201) {\n        refreshRead();\n        fetchIssues(); // Fetch data again after creating an issue\n        if (navigation && navigation.goBack) {\n          navigation.goBack();\n        } else {\n          console.error('Navigation object or goBack method is undefined');\n        }\n      } else {\n        console.error('Failed to create issue. Status:', response.status);\n      }\n    } catch (error) {\n      console.error('Error creating issue:', error.message);\n    }\n  };\n\n  return (\n    <View style={Createstyle.container}>\n      <View style={Createstyle.container}>\n        {/* Your TextInput and Submit button */}\n        <TextInput\n          style={Createstyle.input}\n          placeholder=\"Create Issue\"\n          value={issueText}\n          onChangeText={(text) => setIssueText(text)}\n        />\n        <TouchableOpacity style={Createstyle.button} onPress={createIssue}>\n          <Text style={Createstyle.buttonText}>Submit</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Container for Fetched Data */}\n      <View style={Createstyle.container}>\n        <Text style={Createstyle.heading}>Fetched Data:</Text>\n        <FlatList\n          data={fetchedData}\n          keyExtractor={(item) => item._id}\n          renderItem={({ item }) => (\n            <View style={Createstyle.issueContainer}>\n              <Text style={Createstyle.issueText}>{item.text}</Text>\n            </View>\n          )}\n        />\n      </View>\n    </View>\n  );\n};\n\nexport default Create;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}